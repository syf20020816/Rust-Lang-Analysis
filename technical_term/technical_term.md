# Technical Term

- author : syf20020816@outlook.com
- date : 2023-06-29

## 旋转操作

旋转操作（rotation operation）指的是对二进制数进行循环位移的操作。旋转操作在计算机编程中常常用于位操作、密码学、数据压缩等领域

旋转操作通常涉及两个参数：要旋转的二进制数和旋转的位数。例如，如果我们将 10101100 向左旋转 2 位，则结果应为 10110001。向左旋转意味着最左边的位将移动到最右边，同时保持其它位的相对顺序不变。

同样，如果我们将 10101100 向右旋转 3 位，则结果应为 10010101。向右旋转意味着最右边的位将移动到最左边，同时保持其它位的相对顺序不变。

> note ： 向左旋转变大，向右旋转变小

<img src="https://github.com/syf20020816/Rust-Lang-Analysis/blob/main/imgs/ro_example.png">

## 交换操作

交换操作（swap operation）指的是将二进制数高位与低位进行交换

例如：1011 0101 交换后 0101 1011

## Const Trait

在Rust中，`impl MyTrait`和`impl const MyTrait`之间有一些区别。

1. 功能特性：`impl MyTrait`用于实现一个普通的trait，该trait可以包含任意的方法和关联类型。而`impl const MyTrait`用于实现一个特殊的trait，该trait只能包含具有`const`修饰符的方法。
2. 方法调用：对于`impl MyTrait`实现的trait，其方法可以通过实例对象进行调用，即可以使用动态分发。而`impl const MyTrait`实现的trait中的方法只能通过类型名直接调用，即使用静态分发。
3. 特化常量：`impl MyTrait`可以在实现中使用特定的常量值。对于`impl const MyTrait`，它允许在trait的方法中使用const常量，并保证在编译时进行计算。这可以用于在编译期间优化代码。

需要注意的是，`impl const`是Rust 1.50版本引入的新功能，因此如果你使用较早的Rust版本，可能不支持`impl const`。

## 宏实现(常用形式)

先看问题：为什么要实现三种
1. `impl<'a> const $imp<$u> for &'a $t `
2. `impl const $imp<&$u> for $t `
3. `impl const $imp<&$u> for &$t `

这三种宏实现形式的目的是为了提供更灵活的宏使用方式和代码复用。

1. `impl<'a> const $imp<$u> for &'a $t`：这种形式的宏实现允许将 trait 实现关联到一个引用类型上，并且在编译时进行常量计算。通过这种方式，我们可以对一个引用类型实现常量级的方法。这在某些情况下很有用，特别是当我们需要对引用进行操作但又不想复制实际数据时。
2. `impl const $imp<&$u> for $t`：这种形式的宏实现允许将 trait 实现关联到一个值类型上，并且在编译时进行常量计算。通过这种方式，我们可以在编译时为值类型实现常量级的方法。这对于需要在编译期执行某些操作的场景非常有用，例如在编译时计算某些值或执行某些验证。
3. `impl const $imp<&$u> for &$t`：这种形式的宏实现允许将 trait 实现关联到一个引用类型的引用上，并且在编译时进行常量计算。通过这种方式，我们可以在编译时为引用类型的引用实现常量级的方法。这在需要在编译时操作引用的场景下很有用，例如对多层引用进行操作时。

这三种宏实现形式提供了更多的灵活性和代码复用性，能够满足不同场景下的需求，并且在编译时进行常量计算可以提高性能和代码质量。